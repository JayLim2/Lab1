<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Редактирование Книги</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <script type="text/javascript">
    </script>
    <link type="text/css" rel="stylesheet" href="../static/css/main.css" th:href="@{/css/main.css}"/>

</head>
<body>
    <div class="mainBox">
        <div class = "leftSide">
            <p> А тут менюшка</p><br>
            <ul>
                <li><a href="/books">Тут книги</a></li>
                <li><a href="/authors">А тут авторы</a></li>
                <li><a href="/publishers">А тут издатели</a></li>
                <li sec:authorize = "!isAuthenticated()">
                <a href="/login">А тут можно залогиниться</a>    
                </li>
                <li sec:authorize = "isAuthenticated()">
                    logged as: <span sec:authentication = "name"></span> 
                </li>
                <li sec:authorize = "isAuthenticated()">
                    <a href="/logout">разлогиниться</a>
                </li>   
            </ul>
        </div>
        <div class = "rightSide">
            <div class = "header">
                <p>Тут будет тобешь заголовок</p>
            </div>

            <div th:switch="${submitEditStatus}">
                <div th:case="'1'" class="error">
                    Такая книга уже существует, либо нарушены ограничения БД.
                </div>
                <div th:case="'2'" class="error">
                    Год должен быть не менее 0 и не более текущего.
                </div>
                <div th:case="'3'" class="error">
                    Год должен быть числом.
                </div>
                <div th:case="'4'" class="error">
                    Название книги не может быть пустым.
                </div>
                <div th:case="'5'" class="error">
                    Неизвестная ошибка сервера.
                </div>
                <div th:case="'6'" class="error">
                    Такой книги больше нет.
                </div>
                <div th:case="'7'" class="error">
                    Списки авторов или идателей изменились.
                </div>
            </div>

            <form id="editForm" action="submitEdit" method="POST">
                <input type="hidden" id = "id" name = "id" th:value = "${bookID}">
                <input class = "inputField" type="text" id = "booktitle" name = "booktitle" th:value = "${bookName}"><br>
                <input class = "inputField" type="text" id = "publishYear" name = "publishYear" th:value="${publishYear}"><br>
                
                <select class = "inputField" name = "publisher">
                    <option th:each = "publisher : ${publishers}" th:value="${publisher.publisherID}" th:label ="${publisher.publisherName}" th:selected='${publisher.equals(bpublisher)}'></option>
                </select><br>
                <select class = "inputField" name = "author" multiple>
                    <option th:each = "author : ${authors}" th:value="${author.authorID}" th:label ="${author.authorName}" th:selected="${bauthors != null} ? ${#lists.contains(bauthors, author)}"></option>
                </select><br>
                <textarea class = "inputField" form="editForm" id = "brief" name = "brief" th:text = "${brief}" cols="50" rows="6">
                </textarea><br>
                <input class="submitBtn" type="submit" value="submit"><br>
            </form>
            <div style="height:100px;">
            
            </div>
        </div>
        
    </div>
    
</body>
</html>
